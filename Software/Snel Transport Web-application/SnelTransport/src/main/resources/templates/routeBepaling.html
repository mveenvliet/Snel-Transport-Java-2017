<!DOCTYPE html>
<html>

<head>
<meta charset="utf-8"></meta>
<meta name="viewport" content="width=device-width"></meta>
<meta name="placeOrder" content="Order placement"></meta>
<script
	src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
<script src="../static/js/placeOrder.js" th:src="@{/js/placeOrder.js}"></script>
<title>Route bepaling</title>
<link rel="stylesheet" href="../static/css/style.css"
	th:href="@{/css/style.css}"></link>
</head>
<!--[BEGIN Style which should be moved to the CSS file]========================================================================-->
<style>
#right-panel {
	font-family: 'Roboto', 'sans-serif';
	line-height: 40px;
	padding-left: 10px;
}

#right-panel select, #right-panel input {
	font-size: 15px;
}

#right-panel select {
	width: 100%;
}

#right-panel i {
	font-size: 12px;
}

html, body {
	height: 100%;
	margin: 0;
	padding: 0;
}

#map {
	margin: 1%;
	float: left;
	width: 60%;
	height: 80%;
}

#right-panel {
	margin: 1%;
	width: 35%;
	float: right;
	text-align: left;
}

#directions-panel {
	overflow: scroll;
	height: 100% vh;
	width: 100% vh;
}
</style>
<!--[END Style which should be moved to the CSS file]==========================================================================-->

<body>
	<!--[BODY STARTS]==========================================================================================================-->
	<!--[HEADER STARTS]========================================================================================================-->
	<header>
		<div>
			<h1 id="pageHead">Bestellingen weergeven</h1>
			<nav>
				<ul>
					<li class="dropdown"><a href="/" class="dropdownBtn">Bestellingen</a>
						<div class="dropdownMenu">
							<a href="/">Bestelling plaatsen</a> <a href="showOrders">Bestellingen
								weergeven</a>
						</div></li>
					<li class="dropdown"><a class="dropdownBtn">Management</a>
						<div class="dropdownMenu">
							<a href="customerManagement">KlantManagement</a> <a
								href="productManagement">ProductManagement</a> <a
								href="truckManagement">Vrachtwagenmanagement</a>
						</div></li>
					<li><a href="RouteBepaling">Route Bepaling</a></li>
				</ul>
			</nav>
		</div>
	</header>
	<!-- [MAP]================================================================================================-->
	<div id="map"></div>
	<!-- [RIGHT PANEL]=========================================================================================-->
	<div id="right-panel">
		<div>
			<b>Vrachtwagen:</b> <select id="Wagen">
				<option value="00 STP 1">00STP1</option>
				<option value="00 STP 2">00STP2</option>
				<option value="00 STP 3">00STP3</option>
			</select> <b>Waypoints:</b> <br /> <select multiple="multiple" id="waypoints">
				<option value="Oosterpark 13, 9404BD, Assen, Nederland">Assen</option>
				<option value="Groningen, Nederland">Groningen</option>
				<option value="Leeuwarden, Nederland">Leeuwarden</option>
				<option value="Amsterdam, Nederland">Amsterdam</option>
			</select> <br /> <input type="submit" id="submit" />
		</div>
		<div id="directions-panel"></div>
	</div>
	<!-- [SCRIPT]=============================================================================================-->
	<script th:inline="javascript">
    /*<![CDATA[*/
		function initMap() {
			var directionsService = new google.maps.DirectionsService;
			var directionsDisplay = new google.maps.DirectionsRenderer;
			var map = new google.maps.Map(document.getElementById('map'), {
				zoom: 9,
				center: {lat: 52.011521, lng: 4.710463}});
        
			directionsDisplay.setMap(map);
        	
			document.getElementById('submit').addEventListener('click', function() {
          		calculateAndDisplayRoute(directionsService, directionsDisplay)});
      }
    
		function calculateAndDisplayRoute(directionsService, directionsDisplay) {
			var waypts = [];
			var checkboxArray = document.getElementById('waypoints');
			for (var i = 0; i < checkboxArray.length; i++) {
				if (checkboxArray.options[i].selected) {
					waypts.push({
					location: checkboxArray[i].value,
					stopover: true});
				}
			}

	        directionsService.route({
				origin:"Gouda, Nederland",
				destination: "gouda, Nederland",
				waypoints: waypts,
				optimizeWaypoints: true,
				travelMode: 'DRIVING'
			}, function(response, status) {
				if (status === 'OK') {
					directionsDisplay.setDirections(response);
					var route = response.routes[0];
					var summaryPanel = document.getElementById('directions-panel');
					summaryPanel.innerHTML = '';
					for (var i = 0; i < route.legs.length; i++) {
						var routeSegment = i + 1;
						summaryPanel.innerHTML += '<b>Route Segment: ' + routeSegment +
						'</b><br>';
						summaryPanel.innerHTML += route.legs[i].start_address + ' to ';
						summaryPanel.innerHTML += route.legs[i].end_address + '<br>';
						summaryPanel.innerHTML += route.legs[i].distance.text + '<br><br>';
					}
				} else {
					window.alert('Directions request failed due to ' + status);
				}
			});	
		}
	/*]]>*/
    </script>
	<script async="async" defer="defer"
		th:src="@{https://maps.googleapis.com/maps/api/js(key=AIzaSyDYNY1Z034B-c9YKWJ2RI4jbQzWtFMEHHg,callback=initMap)}"></script>
</body>
</html>
